    1                                  Прогр ConcreteMixing {
    2          /* Демонстрационная программа управления эталонным процессом
    3             
    4          
    5             ДАТА СОЗДАНИЯ:              01.11.2012  
    6             ДАТЫ КОРРЕКЦИИ:              
    7          */
    8          
    9          
   10          
   11           ТАКТ     10;    /* период активизации равен 100 миллисекундам */
   12          
   13          /*###########################################################*/
   14          /*#########                     #############################*/
   15          /*#########  ОПИСАНИЕ КОНСТАНТ  #############################*/
   16          /*#########                     #############################*/
   17          /*###########################################################*/
   18          
   19           КОНСТ ВКЛ                1;
   20           КОНСТ ВЫКЛ               0;
   21          
   22          /*###########################################################*/
   23          /*########                                          #########*/
   24          /*########  ОПИСАНИЕ РЕГИСТРОВ МОДУЛЕЙ УСО          #########*/
   25          /*########                                          #########*/
   26          /*###########################################################*/
   27                                  
   28          ВХОД  ЛОГ_ВХОДЫ1  0 0 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
   29          ВХОД  ЛОГ_ВХОДЫ2  1 0 8; 
   30          ВХОД  ЛОГ_ВХОДЫ3  2 0 8;
   31          ВХОД  ЛОГ_ВХОДЫ4  3 0 8; 
   32          ВЫХОД ЛОГ_ВЫХОДЫ1 0 0 8;
   33          ВЫХОД ЛОГ_ВЫХОДЫ2 1 0 8;
   34          
   35          
   36          /*###########################################################*/
   37          /*########                                          #########*/
   38          /*########  ПРОЦЕССЫ                                #########*/
   39          /*########                                          #########*/
   40          /*###########################################################*/
   41          
   42          /*
   43           * Процесс Инициализация. Служит для
   44           * развертывания программы. Этот процесс (описанный
   45           * первым) - единственно активный процесс по запуску.
   46           * Кроме этого, процесс Инициализация содержит описание 
   47           * переменных для ссылок из других
   48           * процессов. Это удобно: описания локализованы в одном
   49           * месте.
   50          */
   51          
   52          ПРОЦ Инициализация{
   53          
   54          /*===========================================================*/
   55          /*=========== ОПИСАНИЕ ПЕРЕМЕННЫХ ===========================*/
   56          /*===========================================================*/
   57          
   58          
   59          /* ВХОДНЫЕ СИГНАЛЫ: */
   60          ЛОГ К_КОВШ_ВНИЗУ = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   61          ЛОГ К_КОВШ_НАВЕРХУ = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   62          ЛОГ К_АВАРИЯ_ПЛЖ_КОВША = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   63          ЛОГ К_ПРОСЫП = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   64          ЛОГ К_ПЕРЕГРУЗ_КНВР = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   65          ЛОГ К_ПЕРЕГРУЗ_КОВША = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   66          ЛОГ К_ПЕРЕГРУЗ_СМСТЛ = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;
   67          ЛОГ К_ВЕС_КНВР  = {ЛОГ_ВХОДЫ2[1]} ДЛЯ ВСЕХ;
   68          ЛОГ К_ВЕС_КОВША = {ЛОГ_ВХОДЫ2[1]} ДЛЯ ВСЕХ;
   69          ЛОГ К_ВЕС_СМСТЛ = {ЛОГ_ВХОДЫ2[1]} ДЛЯ ВСЕХ;
   70          
   71          /* ВЫХОДНЫЕ СИГНАЛЫ (т.к. привязаны к модулю выходов): */ 
   72          ЛОГ У_ЩЕБЕНЬ = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   73          ЛОГ У_ПЕСОК  = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   74          ЛОГ У_ВКЛ_КНВР   = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   75          ЛОГ У_КОВШ_ВНИЗ  = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   76          ЛОГ У_КОВШ_ВВЕРХ = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   77          ЛОГ У_КОВШ_ПВРТ  = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;
   78          ЛОГ У_ЦЕМЕНТ     = {ЛОГ_ВЫХОДЫ2[1]} ДЛЯ ВСЕХ;
   79          ЛОГ У_ВОДА       = {ЛОГ_ВЫХОДЫ2[1]} ДЛЯ ВСЕХ;
   80          ЛОГ У_ВКЛ_СМСТЛ  = {ЛОГ_ВЫХОДЫ2[1]} ДЛЯ ВСЕХ;
   81          
   82          
   83          /*########  СОСТОЯНИЯ ПРОЦЕССА  #########*/
   84           СОСТ Начало {  
   85          У_ЩЕБЕНЬ = ВЫКЛ; /* выключаем все */
   86          У_ПЕСОК  = ВЫКЛ;
   87          /* запускаем процессы */
   88          СТАРТ ПРОЦ Щебень; 
   89          СТОП;
   90           }
   91          }
   92          ПРОЦ Щебень {
   93          ИЗ ПРОЦ Инициализация  
   94          У_ЩЕБЕНЬ, 
   95          К_ВЕС_КНВР; 
   96            СОСТ Начало{
   97                ЕСЛИ (К_ВЕС_КНВР == 0 ) {
   98                 У_ЩЕБЕНЬ = ВКЛ;
   99            } ИНАЧЕ
  100           У_ЩЕБЕНЬ = ВЫКЛ;  
  101             ЗАЦИКЛИТЬ; /* снимем контроль ошибки по отсутствию перехода из */           
  102           }
  103          
  104          }
  105          }

%RCSL-I-SUMMARY, Completed with 0 error(s).
%RCSL-I-SUMMARY, Completed with 0 warning(s).

 %RCSL-I-SUMMARY, Completed with 0 error(s).